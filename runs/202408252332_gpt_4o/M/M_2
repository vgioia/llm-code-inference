```python
def main():
    import sys
    input = sys.stdin.read
    data = input().split()
    
    idx = 0
    N = int(data[idx])
    idx += 1
    
    costs = []
    for i in range(N):
        costs.append([int(data[idx + j]) for j in range(N)])
        idx += N
    
    def is_consistent():
        for k in range(N):
            for i in range(N):
                for j in range(N):
                    if costs[i][j] > costs[i][k] + costs[k][j]:
                        return False
        return True
    
    if not is_consistent():
        print(-1)
        return
    
    def count_removable_edges():
        removable = 0
        for i in range(N):
            for j in range(i + 1, N):
                for k in range(N):
                    if k != i and k != j and costs[i][j] == costs[i][k] + costs[k][j]:
                        removable += 1
                        break
        return removable
    
    print(count_removable_edges())

main()
```