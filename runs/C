```
N = int(input())
edges = list(map(int, input().split()))
values = list(map(int, input().split()))

dp = [0] * N
visited = [False] * N

def dfs(node):
    if visited[node]:
        return dp[node]
    
    visited[node] = True
    max_photos = 1
    for neighbor in range(1, N):
        if edges[neighbor-1] == node:
            photos = 0
            for i in range(len(values)):
                if values[i] > values[neighbor-1]:
                    photos += 1
                    break
            dp[node] = max(dp[node], dfs(neighbor) + photos)
    return dp[node]

print(' '.join(map(str, [dfs(i) - 1 for i in range(1, N)])))
```