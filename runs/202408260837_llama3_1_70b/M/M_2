```python
import sys

def floyd_warshall(matriz):
    n = len(matriz)
    for k in range(n):
        for i in range(n):
            for j in range(n):
                matriz[i][j] = min(matriz[i][j], matriz[i][k] + matriz[k][j])
    return matriz

def main():
    n = int(input())
    matriz = [list(map(int, input().split())) for _ in range(n)]
    matriz_fw = floyd_warshall([linha[:] for linha in matriz])
    count = 0
    for i in range(n):
        for j in range(i+1, n):
            if matriz[i][j] > matriz_fw[i][j]:
                print(-1)
                return
            elif matriz[i][j] == matriz_fw[i][j]:
                count += 1
    print(count)

if __name__ == "__main__":
    main()
```