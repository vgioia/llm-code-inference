```python
import sys
input = sys.stdin.read

def min_shuffles(N, permutation):
    position = [0] * (N + 1)
    for i in range(N):
        position[permutation[i]] = i
    
    max_len = 0
    current_len = 1
    
    for i in range(2, N + 1):
        if position[i-1] < position[i]:
            current_len += 1
        else:
            if current_len > max_len:
                max_len = current_len
            current_len = 1
    
    if current_len > max_len:
        max_len = current_len
    
    return N - max_len

data = input().split()
N = int(data[0])
permutation = list(map(int, data[1:]))

print(min_shuffles(N, permutation))
```